import{r as l,u as S,k as V,c as n,a as t,w as z,j as A,t as r,l as F,v as H,F as x,m as w,q as R,o as a,n as C}from"./index-Cu7E_BeX.js";import{a as p}from"./axios-C8DqakIB.js";const q="/HS_practice_vue_TodoList/assets/empty%201-CN3X7Dzs.png",E={class:"bg-linear-warning-light px-c2-1 pt-3",style:{"min-height":"670px"}},G={class:"container-lg"},I={class:"mb-3 mb-md-c4-3"},P={class:"row d-flex align-items-center"},U=t("div",{class:"col-md-4 col-8"},[t("img",{alt:"totoList logo",class:"img-fluid",src:R})],-1),X={class:"col-md-8 col-4"},J={class:"d-flex"},K={class:"row d-flex justify-content-center"},O={class:"col-md-6"},Q={class:"input-group bg-light border border-0 p-2 rounded-3 mb-3"},W=t("i",{class:"bi bi-plus-lg"},null,-1),Y=[W],Z={key:0,class:"row d-flex justify-content-center"},tt=t("div",{class:"col-md-4"},[t("div",{class:"pt-4 pt-md-c4-4"},[t("p",{class:"text-center mb-3"},"目前尚無待辦事項"),t("img",{alt:"totoList logo",class:"img-fluid d-block mx-auto",src:q})])],-1),st=[tt],ot={key:1,class:"row d-flex justify-content-center"},et={class:"col-md-6"},nt={class:"list-card-shadow bg-light rounded-3"},at=t("ul",{class:"nav nav-underline",role:"tablist"},[t("div",{class:"row gx-0 w-100"},[t("div",{class:"col-4"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link active w-100",id:"allList-tab","data-bs-toggle":"tab","data-bs-target":"#allList-tab-pane",type:"button",role:"tab","aria-controls":"allList-tab-pane","aria-selected":"true"}," 全部 ")])]),t("div",{class:"col-4"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link w-100",id:"undone-tab","data-bs-toggle":"tab","data-bs-target":"#undone-tab-pane",type:"button",role:"tab","aria-controls":"undone-tab-pane","aria-selected":"false"}," 待完成 ")])]),t("div",{class:"col-4"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link w-100",id:"done-tab","data-bs-toggle":"tab","data-bs-target":"#done-tab-pane",type:"button",role:"tab","aria-controls":"done-tab-pane","aria-selected":"false"}," 已完成 ")])])])],-1),lt={class:"tab-content",id:"ListTabContent"},ct={class:"tab-pane list-unstyled fade show active px-3 pb-3 pt-4 ps-md-4 pb-md-4",id:"allList-tab-pane",role:"tabpanel","aria-labelledby":"allList-tab",tabindex:"0"},dt=["onClick"],it=t("i",{class:"bi bi-app"},null,-1),rt=[it],ut=["onClick"],bt=t("i",{class:"bi bi-check-lg"},null,-1),pt=[bt],_t=["onClick"],ht=["onClick"],vt={class:"py-2"},kt={class:"tab-pane list-unstyled fade p-3 py-md-4 ps-md-4 pe-md-3",id:"undone-tab-pane",role:"tabpanel","aria-labelledby":"undone-tab",tabindex:"0"},gt=["onClick"],mt=t("i",{class:"bi bi-app"},null,-1),yt=[mt],ft=["onClick"],xt=t("i",{class:"bi bi-check-lg"},null,-1),wt=[xt],Ct=["onClick"],$t=["onClick"],Tt={class:"py-2"},Lt={class:"tab-pane list-unstyled fade p-3 py-md-4 ps-md-4 pe-md-3",id:"done-tab-pane",role:"tabpanel","aria-labelledby":"done-tab",tabindex:"0"},zt=["onClick"],Dt=t("i",{class:"bi bi-app"},null,-1),Bt=[Dt],jt=["onClick"],Mt=t("i",{class:"bi bi-check-lg"},null,-1),Nt=[Mt],St=["onClick"],Vt=["onClick"],At={class:"py-2"},_="https://todolist-api.hexschool.io",qt={__name:"TodoListView",setup(Ft){const d=l(""),D=l(""),$=S(),k=l(""),T=l("");V(async()=>{try{d.value=document.cookie.replace(/(?:(?:^|.*;\s*)userToken\s*=\s*([^;]*).*$)|^.*$/,"$1");const e=await p.get(`${_}/users/checkout`,{headers:{authorization:d.value}});k.value=e.data,T.value=!0,g()}catch(e){console.log(e),alert("還沒有登入唷"),$.push("/")}});const m=l(!0),h=l(""),y=l(""),f=l(""),i=l({all:"",undone:"",done:""}),g=async()=>{try{const e=await p.get(`${_}/todos`,{headers:{authorization:d.value}});h.value=e.data.data,y.value=h.value.filter(o=>o.status==!1),f.value=h.value.filter(o=>o.status==!0),i.value.all=h.value.length,i.value.undone=y.value.length,i.value.done=f.value.length,i.value.all!==0?m.value=!1:m.value=!0}catch(e){console.log(e)}},L=l(!0),B=async e=>{try{const o=await p.post(`${_}/users/sign_out`,e,{headers:{authorization:d.value}});console.log(o),document.cookie="userToken=null",L.value=!0,$.push("/")}catch(o){console.log(o),L.value=!1}},v=l(""),j=l(""),M=l(!1),N=async()=>{try{if(!v.value){alert(`${k.value.nickname}，您尚未輸入代辦事項唷`);return}const e={content:""};e.content=v.value;const o=await p.post(`${_}/todos`,e,{headers:{authorization:d.value}});j.value=o.data,M.value=!0,v.value="",g()}catch(e){console.log(e),D.value.add=e.response.data.message}},u=async e=>{try{const o=await p.delete(`${_}/todos/${e}`,{headers:{authorization:d.value}});console.log(o),g()}catch(o){console.log(o)}},b=async e=>{try{const o=await p.patch(`${_}/todos/${e}/toggle`,{},{headers:{authorization:d.value}});console.log(o),g()}catch(o){console.log(o)}};return(e,o)=>(a(),n("div",E,[t("div",G,[t("header",I,[t("div",P,[U,t("div",X,[t("div",J,[z(t("p",{class:"fw-bold d-none d-md-block ms-auto"},r(k.value.nickname)+"的代辦 ",513),[[A,T.value]]),t("a",{href:"#",class:"link-dark text-decoration-none ms-auto ms-md-4",onClick:o[0]||(o[0]=F(s=>B(k.value.uid),["prevent"]))}," 登出 ")])])])]),t("div",K,[t("div",O,[t("div",Q,[z(t("input",{type:"text",class:"form-control border-0 bg-transparent",placeholder:"新增代辦事項","aria-label":"add todo list","aria-describedby":"button-add","onUpdate:modelValue":o[1]||(o[1]=s=>v.value=s)},null,512),[[H,v.value]]),t("button",{class:"btn btn-dark rounded-3 fs-5 fw-bold",type:"button",id:"button-add",onClick:N},Y)])])]),m.value?(a(),n("div",Z,st)):(a(),n("div",ot,[t("div",et,[t("div",nt,[at,t("div",lt,[t("ul",ct,[(a(!0),n(x,null,w(h.value,s=>(a(),n("div",{class:"d-flex align-items-start",key:s.id},[t("li",{class:C(["form-check custom-checkbox listBorder-bottom flex-grow-1 d-flex ps-0 pb-3 mb-3",{isDone:s.status}])},[s.status?(a(),n("button",{key:1,type:"button",class:"btn border-0 fs-5 text-warning pt-0",onClick:c=>b(s.id)},pt,8,ut)):(a(),n("button",{key:0,type:"button",class:"btn border-0 fs-5 pt-0",onClick:c=>b(s.id)},rt,8,dt)),t("p",null,r(s.content),1),t("button",{type:"button",onClick:c=>u(s.id),class:"btn-close d-md-none ms-auto"},null,8,_t)],2),t("button",{type:"button",onClick:c=>u(s.id),class:"btn-close d-none d-md-block ms-auto"},null,8,ht)]))),128)),t("p",vt,r(i.value.undone)+"個待完成項目",1)]),t("ul",kt,[(a(!0),n(x,null,w(y.value,s=>(a(),n("div",{class:"d-flex align-items-start",key:s.id},[t("li",{class:C(["form-check custom-checkbox listBorder-bottom flex-grow-1 d-flex ps-0 pb-3 mb-3",{isDone:s.status}])},[s.status?(a(),n("button",{key:1,type:"button",class:"btn border-0 fs-5 text-warning pt-0",onClick:c=>b(s.id)},wt,8,ft)):(a(),n("button",{key:0,type:"button",class:"btn border-0 fs-5 pt-0",onClick:c=>b(s.id)},yt,8,gt)),t("p",null,r(s.content),1),t("button",{type:"button",onClick:c=>u(s.id),class:"btn-close d-md-none ms-auto"},null,8,Ct)],2),t("button",{type:"button",onClick:c=>u(s.id),class:"btn-close d-none d-md-block ms-auto"},null,8,$t)]))),128)),t("p",Tt,r(i.value.undone)+"個待完成項目",1)]),t("ul",Lt,[(a(!0),n(x,null,w(f.value,s=>(a(),n("div",{class:"d-flex align-items-start",key:s.id},[t("li",{class:C(["form-check custom-checkbox listBorder-bottom flex-grow-1 d-flex ps-0 pb-3 mb-3",{isDone:s.status}])},[s.status?(a(),n("button",{key:1,type:"button",class:"btn border-0 fs-5 text-warning pt-0",onClick:c=>b(s.id)},Nt,8,jt)):(a(),n("button",{key:0,type:"button",class:"btn border-0 fs-5 pt-0",onClick:c=>b(s.id)},Bt,8,zt)),t("p",null,r(s.content),1),t("button",{type:"button",onClick:c=>u(s.id),class:"btn-close d-md-none ms-auto"},null,8,St)],2),t("button",{type:"button",onClick:c=>u(s.id),class:"btn-close d-none d-md-block ms-auto"},null,8,Vt)]))),128)),t("p",At,r(i.value.done)+"個已完成項目",1)])])])])]))])]))}};export{qt as default};
