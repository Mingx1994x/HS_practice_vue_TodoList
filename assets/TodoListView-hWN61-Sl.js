import{_ as V,o as s,c as e,a as t,F as w,j as C,t as h,n as N,r,u as A,k as S,w as z,i as F,l as H,v as R,b as g,m as E}from"./index-CddkSmwH.js";import{a as m}from"./axios-C8DqakIB.js";const G="/HS_practice_vue_TodoList/assets/empty%201-CN3X7Dzs.png",I={},P={class:"pt-4 pt-md-c4-4"},X=t("p",{class:"text-center mb-3"},"目前尚無待辦事項",-1),q=t("img",{alt:"totoList logo",class:"img-fluid d-block mx-auto",src:G},null,-1),J=[X,q];function K(_,c){return s(),e("div",P,J)}const O=V(I,[["render",K]]),Q={class:"tab-pane list-unstyled fade show active px-3 pb-3 pt-4 ps-md-4 pb-md-4",id:"allList-tab-pane",role:"tabpanel","aria-labelledby":"allList-tab",tabindex:"0"},W=["id","onClick"],Y=t("i",{class:"bi bi-app"},null,-1),Z=[Y],tt=["id","onClick"],ot=t("i",{class:"bi bi-check-lg"},null,-1),st=[ot],et=["for"],nt=["onClick"],at=["onClick"],dt={class:"py-2"},lt={__name:"TodosAll",props:["todos","todosNum"],emits:"update-todo",setup(_,{emit:c}){const i=c,b=a=>{i("del-todo",a)},u=a=>{i("update-todo",a)};return(a,v)=>(s(),e("ul",Q,[(s(!0),e(w,null,C(_.todos,o=>(s(),e("div",{class:"d-flex align-items-start",key:o.id},[t("li",{class:N(["form-check custom-checkbox listBorder-bottom flex-grow-1 d-flex ps-0 pb-3 mb-3",{isDone:o.status}])},[o.status?(s(),e("button",{key:1,type:"button",class:"btn border-0 fs-5 text-warning pt-0",id:o.id,onClick:l=>u(o.id)},st,8,tt)):(s(),e("button",{key:0,type:"button",class:"btn border-0 fs-5 pt-0",id:o.id,onClick:l=>u(o.id)},Z,8,W)),t("label",{for:o.id},h(o.content),9,et),t("button",{type:"button",onClick:l=>b(o.id),class:"btn-close d-md-none ms-auto"},null,8,nt)],2),t("button",{type:"button",onClick:l=>b(o.id),class:"btn-close d-none d-md-block ms-auto"},null,8,at)]))),128)),t("p",dt,h(_.todosNum)+"個待完成項目",1)]))}},ct={class:"tab-pane list-unstyled fade p-3 py-md-4 ps-md-4 pe-md-3",id:"done-tab-pane",role:"tabpanel","aria-labelledby":"done-tab",tabindex:"0"},it=["id","onClick"],ut=t("i",{class:"bi bi-app"},null,-1),rt=[ut],bt=["id","onClick"],_t=t("i",{class:"bi bi-check-lg"},null,-1),pt=[_t],ht=["for"],vt=["onClick"],mt=["onClick"],kt={class:"py-2"},$t={__name:"TodosDone",props:["doneTodos","todosNum"],emits:"update-todo",setup(_,{emit:c}){const i=c,b=a=>{i("del-todo",a)},u=a=>{i("update-todo",a)};return(a,v)=>(s(),e("ul",ct,[(s(!0),e(w,null,C(_.doneTodos,o=>(s(),e("div",{class:"d-flex align-items-start",key:o.id},[t("li",{class:N(["form-check custom-checkbox listBorder-bottom flex-grow-1 d-flex ps-0 pb-3 mb-3",{isDone:o.status}])},[o.status?(s(),e("button",{key:1,type:"button",class:"btn border-0 fs-5 text-warning pt-0",id:o.id,onClick:l=>u(o.id)},pt,8,bt)):(s(),e("button",{key:0,type:"button",class:"btn border-0 fs-5 pt-0",id:o.id,onClick:l=>u(o.id)},rt,8,it)),t("label",{for:o.id},h(o.content),9,ht),t("button",{type:"button",onClick:l=>b(o.id),class:"btn-close d-md-none ms-auto"},null,8,vt)],2),t("button",{type:"button",onClick:l=>b(o.id),class:"btn-close d-none d-md-block ms-auto"},null,8,mt)]))),128)),t("p",kt,h(_.todosNum)+"個已完成項目",1)]))}},ft={class:"tab-pane list-unstyled fade p-3 py-md-4 ps-md-4 pe-md-3",id:"undone-tab-pane",role:"tabpanel","aria-labelledby":"undone-tab",tabindex:"0"},gt=["id","onClick"],yt=t("i",{class:"bi bi-app"},null,-1),xt=[yt],Tt=["id","onClick"],wt=t("i",{class:"bi bi-check-lg"},null,-1),Ct=[wt],Nt=["for"],Lt=["onClick"],Dt=["onClick"],zt={class:"py-2"},Bt={__name:"TodosUndone",props:["undoneTodos","todosNum"],emits:"update-todo",setup(_,{emit:c}){const i=c,b=a=>{i("del-todo",a)},u=a=>{i("update-todo",a)};return(a,v)=>(s(),e("ul",ft,[(s(!0),e(w,null,C(_.undoneTodos,o=>(s(),e("div",{class:"d-flex align-items-start",key:o.id},[t("li",{class:N(["form-check custom-checkbox listBorder-bottom flex-grow-1 d-flex ps-0 pb-3 mb-3",{isDone:o.status}])},[o.status?(s(),e("button",{key:1,type:"button",class:"btn border-0 fs-5 text-warning pt-0",id:o.id,onClick:l=>u(o.id)},Ct,8,Tt)):(s(),e("button",{key:0,type:"button",class:"btn border-0 fs-5 pt-0",id:o.id,onClick:l=>u(o.id)},xt,8,gt)),t("label",{for:o.id},h(o.content),9,Nt),t("button",{type:"button",onClick:l=>b(o.id),class:"btn-close d-md-none ms-auto"},null,8,Lt)],2),t("button",{type:"button",onClick:l=>b(o.id),class:"btn-close d-none d-md-block ms-auto"},null,8,Dt)]))),128)),t("p",zt,h(_.todosNum)+"個待完成項目",1)]))}},Ut={class:"main bg-linear-warning-light px-c2-1 pt-3"},jt={class:"container-lg"},Mt={class:"mb-3 mb-md-c4-3"},Vt={class:"row d-flex align-items-center"},At=t("div",{class:"col-md-4 col-8"},[t("img",{alt:"totoList logo",class:"img-fluid",src:E})],-1),St={class:"col-md-8 col-4"},Ft={class:"d-flex align-items-center"},Ht={class:"row d-flex justify-content-center"},Rt={class:"col-md-6"},Et={class:"input-group bg-light border border-0 p-2 rounded-3 mb-3"},Gt=t("i",{class:"bi bi-plus-lg"},null,-1),It=[Gt],Pt={key:0,class:"row d-flex justify-content-center"},Xt={class:"col-md-4"},qt={key:1,class:"row d-flex justify-content-center"},Jt={class:"col-md-6"},Kt={class:"list-card-shadow bg-light rounded-3"},Ot=t("ul",{class:"nav nav-underline",role:"tablist"},[t("div",{class:"row gx-0 w-100"},[t("div",{class:"col-4"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link active w-100",id:"allList-tab","data-bs-toggle":"tab","data-bs-target":"#allList-tab-pane",type:"button",role:"tab","aria-controls":"allList-tab-pane","aria-selected":"true"}," 全部 ")])]),t("div",{class:"col-4"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link w-100",id:"undone-tab","data-bs-toggle":"tab","data-bs-target":"#undone-tab-pane",type:"button",role:"tab","aria-controls":"undone-tab-pane","aria-selected":"false"}," 待完成 ")])]),t("div",{class:"col-4"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link w-100",id:"done-tab","data-bs-toggle":"tab","data-bs-target":"#done-tab-pane",type:"button",role:"tab","aria-controls":"done-tab-pane","aria-selected":"false"}," 已完成 ")])])])],-1),Qt={class:"tab-content",id:"ListTabContent"},k="https://todolist-api.hexschool.io",Zt={__name:"TodoListView",setup(_){const c=r(""),i=r(""),b=A(),u=r(""),a=r("");S(async()=>{try{c.value=document.cookie.replace(/(?:(?:^|.*;\s*)userToken\s*=\s*([^;]*).*$)|^.*$/,"$1");const n=await m.get(`${k}/users/checkout`,{headers:{authorization:c.value}});u.value=n.data,a.value=!0,f()}catch{alert("還沒有登入唷"),b.push("/")}});const v=r(!0),o=r(""),l=r(""),y=r(""),p=r({all:"",undone:"",done:""}),f=async()=>{try{const n=await m.get(`${k}/todos`,{headers:{authorization:c.value}});o.value=n.data.data,l.value=o.value.filter(d=>d.status==!1),y.value=o.value.filter(d=>d.status==!0),p.value.all=o.value.length,p.value.undone=l.value.length,p.value.done=y.value.length,p.value.all!==0?v.value=!1:v.value=!0}catch(n){i.value=n.response.data.message}},L=r(!0),B=async n=>{try{await m.post(`${k}/users/sign_out`,n,{headers:{authorization:c.value}}),document.cookie="userToken=null",L.value=!0,b.push("/")}catch(d){L.value=!1,i.value=d.response.data.message}},$=r(""),U=r(""),j=r(!1),M=async()=>{try{if(!$.value){alert(`${u.value.nickname}，您尚未輸入代辦事項唷`);return}const n={content:""};n.content=$.value;const d=await m.post(`${k}/todos`,n,{headers:{authorization:c.value}});U.value=d.data,j.value=!0,$.value="",f()}catch(n){i.value=n.response.data.message}},x=async n=>{try{await m.delete(`${k}/todos/${n}`,{headers:{authorization:c.value}}),f()}catch(d){i.value=d.response.data.message}},T=async n=>{try{await m.patch(`${k}/todos/${n}/toggle`,{},{headers:{authorization:c.value}}),f()}catch(d){i.value=d.response.data.message}};return(n,d)=>(s(),e("div",Ut,[t("div",jt,[t("header",Mt,[t("div",Vt,[At,t("div",St,[t("div",Ft,[z(t("p",{class:"fw-bold d-none d-md-block ms-auto"},h(u.value.nickname)+"的代辦 ",513),[[F,a.value]]),t("a",{href:"#",class:"text-decoration-none rounded-3 ms-auto ms-md-3 p-2",onClick:d[0]||(d[0]=H(D=>B(u.value.uid),["prevent"]))}," 登出 ")])])])]),t("div",Ht,[t("div",Rt,[t("div",Et,[z(t("input",{type:"text",class:"form-control border-0 bg-transparent",placeholder:"新增代辦事項","aria-label":"add todo list","aria-describedby":"button-add","onUpdate:modelValue":d[1]||(d[1]=D=>$.value=D)},null,512),[[R,$.value]]),t("button",{class:"btn btn-dark rounded-3 fs-5 fw-bold",type:"button",id:"button-add",onClick:M},It)])])]),v.value?(s(),e("div",Pt,[t("div",Xt,[g(O)])])):(s(),e("div",qt,[t("div",Jt,[t("div",Kt,[Ot,t("div",Qt,[g(lt,{todos:o.value,todosNum:p.value.undone,onDelTodo:x,onUpdateTodo:T},null,8,["todos","todosNum"]),g(Bt,{undoneTodos:l.value,todosNum:p.value.undone,onUpdateTodo:T,onDelTodo:x},null,8,["undoneTodos","todosNum"]),g($t,{doneTodos:y.value,todosNum:p.value.done,onUpdateTodo:T,onDelTodo:x},null,8,["doneTodos","todosNum"])])])])]))])]))}};export{Zt as default};
