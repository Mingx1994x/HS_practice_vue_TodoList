import{r as s,u as p,k as b,c as h,w as v,j as k,a as t,F as g,o as m}from"./index-CvHogA49.js";import{a as c}from"./axios-C8DqakIB.js";const y=t("div",{class:"about"},[t("h1",null,"This is an todoList page"),t("div",{class:"input-group border border-2 p-2 rounded-2"},[t("input",{type:"text",class:"form-control border-0 bg-transparent",placeholder:"新增代辦事項","aria-label":"add todo list","aria-describedby":"button-add"}),t("button",{class:"btn btn-outline-secondary",type:"button",id:"button-add"},"Add")])],-1),i="https://todolist-api.hexschool.io",$={__name:"TodoListView",setup(_){const a=s(""),r=p(),n=s(""),u=s("");b(async()=>{try{a.value=document.cookie.replace(/(?:(?:^|.*;\s*)userToken\s*=\s*([^;]*).*$)|^.*$/,"$1");const o=await c.get(`${i}/users/checkout`,{headers:{authorization:a.value}});console.log(o),n.value=o.data,u.value=!0}catch(o){console.log(o),alert("還沒有登入唷"),r.push("/")}});const l=s(!0),d=async o=>{try{const e=await c.post(`${i}/users/sign_out`,o,{headers:{authorization:a.value}});console.log(e),document.cookie="userToken=null",l.value=!0,r.push("/")}catch(e){console.log(e),l.value=!1}};return(o,e)=>(m(),h(g,null,[y,v(t("div",null,[t("button",{type:"button",class:"btn btn-dark cus-btn-dark",onClick:e[0]||(e[0]=f=>d(n.value.uid))}," 登出 ")],512),[[k,u.value]])],64))}};export{$ as default};
